const express = require('express');
const os = require('os');

const app = express();
const port = 3000;

app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// Route to get the local IP address
app.get('/local-ip', (req, res) => {
    const networkInterfaces = os.networkInterfaces();
    let localIP = 'Not found';

    for (const [name, interfaces] of Object.entries(networkInterfaces)) {
        for (const iface of interfaces) {
            if (iface.family === 'IPv4' && !iface.internal) {
                localIP = iface.address;
                break;
            }
        }
        if (localIP !== 'Not found') break;
    }

    res.json({ localIP });
});

app.listen(port, () => {
    console.log(`Server running at http://localhost:${port}`);
});
